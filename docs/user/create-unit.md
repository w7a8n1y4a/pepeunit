# Создание Unit в Pepunit

:::warning Что нужно?
Достаточно настроенного [Repo](/definitions#repo) у которого указана `default` [ветка](/definitions#git-branch).
:::

Перейдите в нужный вам [Repo](/definitions#repo) и найдите подсвеченную зелёным кнопку создания [Unit](/definitions#unit).

## Имя вашего Unit

Требования:
1. Уникальность на текущем [инстансе](/definitions#instance)
1. Длинна от `4` до `20` символов
1. Разрешённые символы: `a-z, A-Z, 0-9 и _.-`

:::info
Можно изменить в будущем
:::

## Уровень видимости
Выберите [Уровень видимости](/mechanics/visibility)

:::info
Можно изменить в будущем
:::

## Блок автообновлений

Доступны два режима:
1. `Auto-update = True` - в данном режиме [Unit](/definitions#unit) подчиняется [Repo](/definitions#repo), в соответствии с [флагами массовых обновлений](/user/settings-repo.md#флаги-массовых-обновлении)
2. `Auto-update = False` - ручной режим обновлений [Unit](/definitions#unit), требует ввести [ветку](/definitions#git-branch) и [коммит](/definitions#git-commit).

## Выбор платформы для компилируемых Repo

Данная опция есть только у [Unit](/definitions#unit) создающихся на основе компилируемых [Repo](/definitions#repo), каждый элемент выбора здесь - это по сути выбор готовой бинарной версии приложения, соответстующий целевому [Тегу](/definitions#git-tag).

:::info
Данные параметры забираются на основе `assets` из релизов `GIT` репозиториев. Разработчики обычно хранят там скомпилированные версии своих приложений - это могут быть скомпилированные программы микроконтроллеров, `.exe` файлы, `.bin` файлы и тд. Сервисы `Gitlab` и `Github` включают сюда также архивы с файлами релиза - `zip`, `tar` ...
:::

# Создание Unit физически

Вы создали представление [Unit](/definitions#unit), пол дела сделано. Теперь нужно настроить окружение и получить файлы для развёртывания на вашем устройстве.

## Настройка окружения

Нажмите на зелёную кнопку `Create Unit`, здесь вас встретят переменные которые нужно заполнить. Обычно разработчики [Repo](/definitions#repo) преднастраивают их для корректной работы [Unit](/definitions#unit), но часть из них как например `WIFI_SSID` и `WIFI_PASS` нужно заполнить вашими данными.

Подсказку о функциональном назначении каждой переменной, обычно можно найти внутри [Git](/definitions#git) репозитория - файл [Readme](/definitions#readme-file).

После нажатия кнопки `Update`, переменные которые вы добавили сохранятся, а также добавятся [стандартные переменные](/developer/struct-env-json), требующиеся для корректной работы [Unit](/definitions#unit).

## Получение файлов развёртывания

В зависимости от того компилируемый ли у вас [Repo](/definitions#repo), процесс получения файлов будет отличаться:

### Компилируемый Repo

Вам потребуется скачать два компанента вашего будущего [Unit](/definitions#unit): 
1. Cкомпилированную часть из вкладки `Compiled Firmware Platforms`, содержащей ссылки на платформы текущей таргет версии [Unit](/definitions#unit).
1. Архив из вкладки `Firmware with env.json and schema.json`.

Вам нужно будет расположить файлы из архива в одной дирректории с скомпилированной частью, чтобы они увидели друг друга

### Интерпритируемый Repo

Достаточно скачать архив из вкладки `Firmware with env.json and schema.json`, в нём будут находиться все нужные вам файлы. После распаковки архива вы будете готовы перейти на следующую стадию.

## Первое развёртывание

Обычно требуется загрузить файлы полученные на предидущем этапе на ваш физический носитель и соблюсти условия запуска.

Для микроконтроллеров `esp32, stm ...` потребуется загрузить файлы в `flash` память, и запустить работу устройства через кнопку `reset`.

Для `Desktop` приложений обычно достаточно запустить бинарный файл или вызвать командой интерпритатора нужный файл.

:::warning
Здесь не может быть универсального правила, т.к. [Unit](/definitions#unit) могут быть совершенно разнообразны, обычно разработчики оставляют инструкцию как корректно заставить [Unit](/definitions#unit) работать в [Readme](/definitions#readme-file) [Git](/definitions#git) репозитория.
:::
