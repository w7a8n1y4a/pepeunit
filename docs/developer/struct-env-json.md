# Структура env.json и env_example.json

:::warning Какое функциональное назначание у env_example.json?
Это контракт между разработчиком Unit и Pepeunit:
1. Разработчик гарантирует, что он реализует в функционале Unit зарезервированные переменные Pepeunit, позволяющие взаимодействовать с Pepeunit
1. Pepeunit гарантирует возможность пользователей установить переменные указанные разработчиком
1. Pepeunit гарантирует что автоматически установит зарезервированные переменные указанные в файле при первом сохранении со стороны пользователя.
:::

## env_example.json

:::info Пользовательский опыт
При первой попытке пользователя установить переменные окружения, он изначально видит только переменные которые добавил разработчик Unit. 
Pepeunit автоматически подставляет зарезервированные переменные при первой установке пользователем своих переменных окружения.
:::

### Зарезервированные переменные Pepeunit

Pepeunit резервирует под нужды связи и стандартные процедуры следующий набор переменных окружения Unit:

```python
[
    'PEPEUNIT_URL',
    'HTTP_TYPE',
    'MQTT_URL',
    'PEPEUNIT_TOKEN',
    'SYNC_ENCRYPT_KEY',
    'SECRET_KEY',
    'PING_INTERVAL',
    'STATE_SEND_INTERVAL'
]
```

За что отвечают данные переменные?
- PEPEUNIT_URL - доменное имя или ip адрес инстанса Pepeunit. Полностью соответствует BACKEND_DOMAIN из .env файла Pepeunit
- HTTP_TYPE - тип соединения с доменным именем или адресом инстанса Pepeunit. Полностью соответствует SECURE из .env файла Pepeunit
- MQTT_URL - доменное имя или ip адресс инстанса EMQX MQTT Brocker. Полностью соответствует MQTT_URL из .env файла Pepeunit
- PEPEUNIT_TOKEN - jwt токен доступа для Unit на инстансе Pepeunit. Данный токен позволяет пройти авторизацию на публикацию и подписку у топиков EMQX MQTT Brocker
- SYNC_ENCRYPT_KEY - 16 битный ключ синхронного шифрования - уникальный для каждого Unit. Удобно использовать при шифровании чего-либо
- SECRET_KEY - 16 битный секретный ключ устройства - уникальный для каждого Unit
- PING_INTERVAL - частота MQTT пинга в секундах
- STATE_SEND_INTERVAL - частота отправки состояния в стандартный топик Pepeunit. Полностью соответствует STATE_SEND_INTERVAL из .env файла Pepeunit

### Переменные окружения разработчика Unit

Разработчик Unit может создавать любые переменные окружения, которые отличаются по названию от стандартных.

:::info Пример env_example.json
```json
{
    "WIFI_SSID": "My_Perfect_Wifi_SSID",
    "WIFI_PASS": "Strong_Password",
    "PUBLISH_SEND_INTERVAL": 10,
    "DUTY_MIN": 8192,
    "DUTY_MAX": 65535,
    "TEMP_MIN": 30,
    "TEMP_MAX": 60,
    "PEPEUNIT_URL": "unit.pepemoss.com",
    "HTTP_TYPE": "https",
    "MQTT_URL": "emqx.pepemoss.com",
    "PEPEUNIT_TOKEN": "jwt_token",
    "SYNC_ENCRYPT_KEY": "32_bit_encrypt_key",
    "SECRET_KEY": "32_bit_secret_key",
    "PING_INTERVAL": 30,
    "STATE_SEND_INTERVAL": 300
}
```
:::

Значения указанные в переменных, добавленых разработчиком, будут отображаться как значения по умолчанию в интерфейсе пользователей.

:::warning
Так как пользователь имеет возможность заполнять значение переменных окружения, очень желательно заполнить readme репозитория, который вы создаёте.
:::

## env.json

:::warning Какое функциональное назначание у env.json?
Файлы окружения, такие как env.json или .env, представляют собой механизм индивидуализации общего кода под конкретное устройство или экземпляр приложения.
:::

:::info Какие основные свойства можно выделить у env.json?
1. env.json файл секретен, его нельзя передавать кому-либо
1. env.json файл позволяет удобно конфигурировать и обновлять Unit
1. env.json файл позволяет Unit знать какому инстансу Pepeunit он принадлежит
1. env.json файл при помощи переменной PEPEUNIT_TOKEN позволяет Pepeunit производить авторизацию для конкретных Unit
:::