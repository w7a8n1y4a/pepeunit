# Федерация

## Главная проблема

Cамый популярный протокол - ActivityPub, он медленный, потому что `REST`. Есть `matrix`, но если его использовать, то придётся прокидывать данные из emqx в `Matrix`

Пока основная идея использовать EMQX bridge. Но то, как это будет работать, требует изучения.

:::danger
Пока данная проблема не решена, следующие пункты по сути не имеют смысла
:::

## Основные задачи Федерации

### То что можно реализовать без протоколов федерации
1. Общий поиск по существующим Repo Registry
1. Система доверенных инстансов. Доверять ли инстансу, решает держатель текущего инстанса. Можно свести к ситсеме белых или чёрных списков, лучше чёрных
1. Автоматическая система прерывания доверия между инстансами
1. Возможность для пользователя, полностью выкачать свои данные, сделать бекап своего аккаунта

### То что требует протоколов
1. Для публичных UnitNode, возможность создать связь между инстансами для получения данных с qos хотябы 1
1. Автоматический бан Внешних UnitNode, которые превышают лимиты


## Подумать о федерации на стороне Unit

1. Переложить задачу отправки данных на другие Unit на само устройство, а именно в его схему
1. Такая политика освободит инстансы от надобности поддерживать соединения, через bridge или аналог
1. Unit придётся публиковать данные в несколько разных emqx
1. Emqx других инстансов придётся передоверять авторизацию родному инстансу Unit

Вопросы к этой реализации:
1. Как маленький Unit будет поддерживать соединение с, например, 50 других инстансов по mqtt?
